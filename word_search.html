<!DOCTYPE html>
<html lang="el">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Παιχνίδι Βρες τη Λέξη</title>
    <style>
        body { font-family: Arial, sans-serif; text-align: center; }
        .game-container { display: flex; flex-direction: column; align-items: center; }
        .search-grid { display: grid; grid-template-columns: repeat(6, 50px); gap: 5px; margin-bottom: 20px; }
        .search-cell { width: 50px; height: 50px; background-color: #ADD8E6; display: flex; align-items: center; justify-content: center; font-size: 20px; font-weight: bold; cursor: pointer; }
        .selected { background-color: lightgreen; }
        .found { background-color: lightgray; cursor: not-allowed; }
        .timer { font-size: 20px; color: red; font-weight: bold; margin-top: 10px; }
        .score { font-size: 18px; margin-top: 10px; }
    </style>
</head>
<body>

<div class="game-container">
    <h1>Βρες τη Λέξη</h1>
    <p id="word-to-find">Βρες τη λέξη:</p>
    <div id="search-grid" class="search-grid"></div>
    <div id="timer" class="timer">Χρόνος: 50</div>
    <div id="score" class="score">Σκορ: 0</div>
    <button onclick="startNewRound()">Ξεκίνα Νέο Γύρο</button>
</div>

<script>
    const words = ['ΙΧΘΥΣ', 'ΑΓΙΟΣ', 'ΛΟΓΟΣ', 'ΧΡΙΣΤΟΣ', 'ΣΤΑΥΡΟΣ', 'ΕΥΧΗ', 'ΑΓΙΑΣΜΟΣ', 'ΕΥΑΓΓΕΛΙΟ'];
    const gridSize = 6;
    let currentWord = '';
    let currentWordArray = [];
    let score = 0;
    let timeLeft = 50;
    let timerInterval;
    let selectedLetters = [];
    let wordPositions = [];
    
    // Ενεργοποιεί τον χρονόμετρο και τον μετράει
    function startTimer() {
        timerInterval = setInterval(function() {
            timeLeft--;
            document.getElementById('timer').innerText = `Χρόνος: ${timeLeft}`;
            
            if (timeLeft === 0) {
                clearInterval(timerInterval);
                checkIfWordIsCorrect();
            }
        }, 1000);
    }

    // Δημιουργεί τον πίνακα των γραμμάτων
    function createGrid() {
        let gridContainer = document.getElementById('search-grid');
        gridContainer.innerHTML = '';
        
        currentWordArray = currentWord.split('');
        wordPositions = [];
        
        let allLetters = generateGridLetters(currentWordArray);
        
        // Γεμίζει τα κελιά με τα γράμματα
        let index = 0;
        for (let row = 0; row < gridSize; row++) {
            for (let col = 0; col < gridSize; col++) {
                let cell = document.createElement('div');
                cell.classList.add('search-cell');
                cell.textContent = allLetters[index++];
                cell.setAttribute('data-letter', cell.textContent);
                cell.setAttribute('data-row', row);
                cell.setAttribute('data-col', col);
                cell.addEventListener('click', selectLetter);
                gridContainer.appendChild(cell);
            }
        }

        // Τοποθετούμε τη λέξη σε τυχαία θέση και κατεύθυνση
        placeWordInGrid(currentWord);
    }

    // Δημιουργεί τα γράμματα του πίνακα
    function generateGridLetters(wordArray) {
        let letters = wordArray.slice();
        let allLetters = [...letters];

        // Προσθέτει τυχαία γράμματα στον πίνακα
        const alphabet = 'ΑΒΓΔΕΖΗΘΙΚΛΜΝΞΟΠΡΣΤΥΦΧΨΩ';
        while (allLetters.length < gridSize * gridSize) {
            let randomLetter = alphabet[Math.floor(Math.random() * alphabet.length)];
            allLetters.push(randomLetter);
        }

        return allLetters.sort(() => Math.random() - 0.5); // Ανακατεύει τα γράμματα
    }

    // Τοποθετούμε τη λέξη στο grid
    function placeWordInGrid(word) {
        let placed = false;
        
        while (!placed) {
            // Επιλέγουμε τυχαία κατεύθυνση
            let direction = Math.floor(Math.random() * 3); // 0: οριζόντια, 1: κάθετα, 2: διαγώνια
            let row = Math.floor(Math.random() * gridSize);
            let col = Math.floor(Math.random() * gridSize);
            
            // Ελέγχουμε αν η λέξη μπορεί να τοποθετηθεί
            if (canPlaceWord(word, row, col, direction)) {
                placed = true;
                // Τοποθετούμε τα γράμματα
                for (let i = 0; i < word.length; i++) {
                    let letter = word[i];
                    let cell;
                    
                    if (direction === 0) {
                        cell = document.querySelector(`[data-row="${row}"][data-col="${col + i}"]`);
                    } else if (direction === 1) {
                        cell = document.querySelector(`[data-row="${row + i}"][data-col="${col}"]`);
                    } else {
                        cell = document.querySelector(`[data-row="${row + i}"][data-col="${col + i}"]`);
                    }
                    
                    cell.textContent = letter;
                    wordPositions.push({ letter: letter, row: parseInt(cell.getAttribute('data-row')), col: parseInt(cell.getAttribute('data-col')) });
                }
            }
        }
    }

    // Ελέγχουμε αν η λέξη μπορεί να τοποθετηθεί στη θέση (row, col) με την κατεύθυνση
    function canPlaceWord(word, row, col, direction) {
        if (direction === 0) { // Οριζόντια
            if (col + word.length > gridSize) return false;
            for (let i = 0; i < word.length; i++) {
                if (document.querySelector(`[data-row="${row}"][data-col="${col + i}"]`).textContent !== '') {
                    return false;
                }
            }
        } else if (direction === 1) { // Κάθετα
            if (row + word.length > gridSize) return false;
            for (let i = 0; i < word.length; i++) {
                if (document.querySelector(`[data-row="${row + i}"][data-col="${col}"]`).textContent !== '') {
                    return false;
                }
            }
        } else { // Διαγώνια
            if (row + word.length > gridSize || col + word.length > gridSize) return false;
            for (let i = 0; i < word.length; i++) {
                if (document.querySelector(`[data-row="${row + i}"][data-col="${col + i}"]`).textContent !== '') {
                    return false;
                }
            }
        }
        return true;
    }

    // Επιλογή γράμματος από τον χρήστη
    function selectLetter(event) {
        let cell = event.target;
        
        // Αποτρέπει την επιλογή των ήδη βρεμένων γραμμάτων
        if (cell.classList.contains('found') || selectedLetters.includes(cell)) return;

        cell.classList.add('selected');
        selectedLetters.push(cell);
        
        // Ελέγχει αν η λέξη είναι έγκυρη
        if (selectedLetters.length === currentWordArray.length) {
            checkIfWordIsCorrect();
        }
    }

    // Ελέγχει αν η λέξη που σχηματίστηκε είναι σωστή
    function checkIfWordIsCorrect() {
        let formedWord = selectedLetters.map(cell => cell.textContent).join('');
        if (formedWord === currentWord) {
            score++;
            document.getElementById('score').innerText = `Σκορ: ${score}`;
            markFoundLetters();
            setTimeout(startNewRound, 1500); // Νέος γύρος μετά από 1.5 δευτερόλεπτα
        } else {
            resetSelectedLetters();
        }
    }

    // Σημειώνει τη σωστή λέξη
    function markFoundLetters() {
        selectedLetters.forEach(cell => {
            cell.classList.add('found');
            cell.classList.remove('selected');
        });
        selectedLetters = [];
    }

    // Επαναφέρει τις επιλεγμένες λέξεις
    function resetSelectedLetters() {
        selectedLetters.forEach(cell => cell.classList.remove('selected'));
        selectedLetters = [];
    }

    // Ξεκινάει έναν νέο γύρο
    function startNewRound() {
        timeLeft = 50;
        document.getElementById('timer').innerText = `Χρόνος: ${timeLeft}`;
        selectedLetters = [];
        currentWord = words[Math.floor(Math.random() * words.length)];
        document.getElementById('word-to-find').innerHTML = `Βρες τη λέξη: <strong>${currentWord}</strong>`;
        createGrid();
        startTimer();
    }

    // Ξεκινάει το πρώτο παιχνίδι
    startNewRound();
</script>

</body>
</html>
